name: robocon-2019-workshop

variables:
  LAB_EXTENSIONS:
    default: >
      @jupyterlab/toc@0.6.0

commands:
  build:conda:
    unix: cd recipes && conda-build --output-folder ../build_artifacts/conda-bld
    windows: cd recipes && conda-build --output-folder ..\build_artifacts\conda-bld
    env_spec: _build

  build:constructor:
    unix: cd constructor && python build.py
    env_spec: _build

  lab:setup:
    env_spec: robotlab-dev
    unix: cd robotlab && python -m pip install -e . --ignore-installed --no-deps --no-cache-dir -vv

  lab:build:
    env_spec: robotlab-dev
    unix: robotlab build --dev

  lab:
    env_spec: robotlab-dev
    unix: robotlab --no-browser --debug

  lab:extensions:
    env_spec: robotlab-dev
    unix: robot-labextension install ${LAB_EXTENSIONS}

env_specs:
  default:
    description:
    channels:
      - ./build_artifacts/conda-bld
      - defaults
      - conda-forge
    packages:
      - conda
      - geckodriver
      - jupyterlab >=0.35,<0.36
      - nodejs >=8,<9
      - opencv
      - python >=3.6,<3.7
      - python-chromedriver-binary
      - robotframework-lint
      - robotframework-seleniumlibrary
      - robotkernel
      - robotlab

  robotlab-dev:
    channels:
      - ./build_artifacts/conda-bld
      - defaults
      - conda-forge
    inherit_from:
      - _python
    packages:
      - jupyterlab >=0.35,<0.36
      - nodejs >=8,<9
      - robotkernel

  _python:
    packages:
      - python >=3.6,<3.7

  _build:
    inherit_from:
      - _python
    packages:
      - conda
      - constructor
      - conda-build
      - conda-verify
      - python >=3.6,<3.7

channels:
  - defaults
  - conda-forge

platforms:
  - linux-64
